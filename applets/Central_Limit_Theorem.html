<!--
	- Get Zoom Square functionality working
	- Set up z1 and z2 so that when hidden, the value of the original varaibles are not lost
	- Get shading of outer probabilities setup
-->

<html>
<head>
	<meta charset="utf-8">  
		<link rel='stylesheet' type='text/css' href='./js/jsxgraph.css' />
		<script src='./js/jsxgraphcore.js' type='text/javascript'></script>
		<script src='./js/MathFunctions.js' type='text/javascript'></script>
	</meta>
</head>

<body>

<h1>Central Limit Theorem</h1>
Sample Size: <input type="text" id="sample_size" value="30">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Digits: <input type="text" id="digits" value="1">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="button" value="Add a Sample" onClick="addSample()">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="button" value="Clear all Samples" onClick="clearSamples()">
</br></br>

<div>
	<div id="jxgbox" class="jxgbox" style="width:720px; height:640px; float:left; resize: both"></div>
	<div id="display" class="jxgbox" style="width:320px; height:640px; float:left"></div>
</div>

<script type='text/javascript'>
		
var board = JXG.JSXGraph.initBoard('jxgbox', {
		boundingbox: [0,10,10,0], 
      	showCopyright: false, 
      	showNavigation: false,
		keepaspectratio: false,
		axis: false,		
    });
		
var displayboard = JXG.JSXGraph.initBoard('display', {
		boundingbox: [0,10,12,0], 
      	showCopyright: false, 
      	showNavigation: false,
		keepaspectratio: false,
		axis: false	
    });		
		
MAXROWS = 50;
MAXCOLUMNS = 108;			
VERTICALSPACING = 0.2;
		
JXG.Options.board.minimizeReflow = 'all';		

initialize();

function initialize() {

	sampleSize = document.getElementById('sample_size').value;
	nDigits = document.getElementById('digits').value;

	population = [];
	texts = []
	
	for(var j = 0; j < MAXROWS; j++) {
		var line = '';
		for(var i = 0; i < MAXCOLUMNS; i++) {
			var rnd = randomInteger(0, 9);
			line += rnd;
		}
		var y = 9.9 - VERTICALSPACING * j;
		texts.push(board.create('text', [0, y, line], { highlight: false, fixed: true } ));
		population.push(line);
	}

	samples = [];
	
}

function addSample() {

	// remove all highlight tags from population
	for(var i = 0; i < MAXROWS; i++) {
		texts[i].setText(population[i]);
	}
	
	sampleSize = document.getElementById('sample_size').value;
	outputText = "sample: ";
	var sample = [];
	
	for(var i = 0; i < sampleSize; i++) {
		var row = randomInteger(0, MAXROWS+1);
		var col = randomInteger(0, MAXCOLUMNS+1);
		var value = population[row][col];
		var line = texts[row].plaintext;
		var newLine = '';
		var numbersInLine = [];
		while (line.length > 0) {
			var item = line[0];
			line = line.substring(1, line.length);
			if(Number.isInteger(parseInt(item))) {
				numbersInLine.push(item);
			} else {
				numbersInLine.push('<' + line.substring(0, line.indexOf('</font>') + 7));
				line = line.substring(line.indexOf('</font>') + 7, line.length);
			}
		}
		if(!numbersInLine[col].includes('</font>')) {
			numbersInLine[col] = '<font color="red" style="background-color:yellow; font-weight:bold">' + numbersInLine[col] + '</font>'
		}
		for(var k = 0; k < numbersInLine.length; k++) {
			newLine += numbersInLine[k];
		}

		texts[row].setText(newLine);
		sample.push(value);	
	}
	samples.push(sample);
}


function clearSamples() {

}

function update() {


		
}


	
</script>
</body>
</html>