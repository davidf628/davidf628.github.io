<!--
	- Get Zoom Square functionality working
-->

<html>
<head>
	<meta charset="utf-8">  
		<link rel='stylesheet' type='text/css' href='https://jsxgraph.uni-bayreuth.de/distrib/jsxgraph.css' />
		<script src='https://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore.js' type='text/javascript'></script>
		<script src='https://jsxgraph.uni-bayreuth.de/distrib/GeonextReader.js' type='text/javascript'></script>
	</meta>
</head>

<body>

<h1>Parametric Graph</h1>
x(t) = <input type="text" id="x_t" value="">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
y(t) = <input type="text" id="y_t" value="">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
t Min = <input type="text" id="t_min" value="">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
t Max = <input type="text" id="t_max" value="">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="button" value="Update" onClick="update()">
</br></br>

<div>
	<div id="jxgbox" class="jxgbox" style="width:720px; height:720px; float:left; resize: both"></div>
	<div id="display" class="jxgbox" style="width:320px; height:720px; float:left"></div>
</div>

<script type='text/javascript'>
		
var board = JXG.JSXGraph.initBoard('jxgbox', {
		boundingbox: [-10,10,10,-10], 
      	showCopyright: false, 
      	showNavigation: true,
		keepaspectratio: false,
		axis: true,
      	zoom: {
            factorX: 1.25,
            factorY: 1.25,
            wheel: true,
            needshift: false,
            eps: 0.1
        }		
    });
		
var displayboard = JXG.JSXGraph.initBoard('display', {
		boundingbox: [0,10,12,0], 
      	showCopyright: false, 
      	showNavigation: false,
		keepaspectratio: false,
		axis: false	
    });		
		
// Initialize variables so that we have something we can update
curve = board.create('curve', [0, 0], 0, 0, { visible: false });

function update() {

	var orgbounds = board.getBoundingBox();
	var width = document.getElementById('jxgbox').clientWidth;
	var height = document.getElementById('jxgbox').clientHeight;

	board.resizeContainer(width, height);
	board.setBoundingBox(orgbounds, false);

	var x_t = document.getElementById('x_t').value;
	var y_t = document.getElementById('y_t').value;
	var t_min = document.getElementById('t_min').value;
	var t_max = document.getElementById('t_max').value;
	board.removeObject(curve);
	
	curve = plot_function(x_t, y_t, parseFloat(t_min), parseFloat(t_max));
	
	board.update();	
		
}

function plot_function(x_t, y_t, t_min, t_max) {
		
	x_func = board.jc.snippet(x_t, true, 't', true);
	y_func = board.jc.snippet(y_t, true, 't', true);
	curve = board.create('curve', [x_func, y_func, t_min, t_max], { curveType: 'parametric', strokeWidth: 2 });
		
	return curve;
}

cb_ZoomSquare = displayboard.create('checkbox', [1, 9, 'Zoom Square']);

slider_horiz_zoom = displayboard.create('slider', [[1, 2], [7, 2], [-10, 1, 10]]);
horiz_zoom_label = displayboard.create('text', [9, 2, 'x zoom']);
horiz_zoom_level = 1;
slider_horiz_zoom.on('drag', 
	function() {
		var orgbounds = board.getBoundingBox();
		var newfactor = slider_horiz_zoom.Value();
		if(horiz_zoom_level > newfactor) {
			orgbounds[0] = orgbounds[0] * 1.1;
			orgbounds[2] = orgbounds[2] * 1.1;
		} else {
			orgbounds[0] = orgbounds[0] / 1.1;
			orgbounds[2] = orgbounds[2] / 1.1;
		}
		board.setBoundingBox(orgbounds, false);
		horiz_zoom_level = newfactor;
	});

slider_vert_zoom = displayboard.create('slider', [[1, 1.5], [7, 1.5], [-10, 1, 10]]);
vert_zoom_label = displayboard.create('text', [9, 1.5, 'y zoom']);
vert_zoom_level = 1;
slider_vert_zoom.on('drag', 
	function() {
		var orgbounds = board.getBoundingBox();
		var newfactor = slider_vert_zoom.Value();
		if(vert_zoom_level > newfactor) {
			orgbounds[1] = orgbounds[1] * 1.1;
			orgbounds[3] = orgbounds[3] * 1.1;
		} else {
			orgbounds[1] = orgbounds[1] / 1.1;
			orgbounds[3] = orgbounds[3] / 1.1;
		}
		board.setBoundingBox(orgbounds, false);
		vert_zoom_level = newfactor;
	});	

</script>
</body>
</html>