<!--

	- Draw x and f(x) using mathematical typesetting
	- Button with instructional alert box
	- Ability to add an open or closed circle at given value
	- change the textbox giving the x and y-values to anchor like was done in the linear regression applet
	- always keep the x-value on screen
		
	Would be nice:
	- if endpoints at infinity would update whenever the graph was rescaled or zoomed
	- Bounding box would automatically resize itself when the div size is changed
	
-->

<html>
<head>
	<meta charset="utf-8">  
		<link rel='stylesheet' type='text/css' href='./js/jsxgraph.css' />
		<script src='./js/jsxgraphcore.js' type='text/javascript'></script>
		<script src='./js/MathFunctions.js' type='text/javascript'></script>
		<script src='./js/DAT.GUI.min.js' type='text/javascript'></script>
	</meta>
</head>

<body>

<div id="jxgbox" class="jxgbox" style="width:1100px; height:640px; float:left; resize: both"></div>

<script type='text/javascript'>
		
var board = JXG.JSXGraph.initBoard('jxgbox', {
		boundingbox: [-10,10,10,-10], 
      	showCopyright: false, 
      	showNavigation: true,
		keepaspectratio: false,
		axis: true,
      	zoom: {
            factorX: 1.25,
            factorY: 1.25,
            wheel: true,
            needshift: false,
            eps: 0.1
        }		
    });
		
// Initialize curve so that we have something we can update
curves = [];
endpoints = [];
nFunctions = 9;
 
init(); 

function update() {

	//orgbounds = board.getBoundingBox();
	width = document.getElementById('jxgbox').clientWidth;
	height = document.getElementById('jxgbox').clientHeight;

	board.resizeContainer(width, height);
	//board.setBoundingBox(orgbounds, false);
	
	updateWindowBounds();

	fs = [parameters.f1, parameters.f2, parameters.f3, parameters.f4, parameters.f5,
	      parameters.f6, parameters.f7, parameters.f8, parameters.f9];
		  
	colors = [parameters.color1, parameters.color2, parameters.color3, 
			  parameters.color4, parameters.color5, parameters.color6, 
			  parameters.color7, parameters.color8, parameters.color9];

	for(var i = 0; i < curves.length; i++) {
		board.removeObject(curves[i]);
	}
	
	for(var i = 0; i < endpoints.length; i++) {
		board.removeObject(endpoints[i]);
	}

	var tmpendpoints = [];	
	for(var i = 0; i < nFunctions; i++) {
		if (fs[i].length != 0) {
			[curves[i], tmpendpoints] = plot_function(board, fs[i], { color: colors[i] });
			for(var j = 0; j < tmpendpoints.length; j++) {
				endpoints.push(tmpendpoints[j]);
			}
		}
	}
	
	board.update();	
		
}

function init() {

	parameters = {
		f1: '', color1: '#0000FF',
		f2: '', color2: '#FF0000',
		f3: '', color3: '#00FF00',
		f4: '', color4: '#FFFF00',
		f5: '', color5: '#FF00FF',
		f6: '', color6: '#00FFFF',
		f7: '', color7: '#000000',
		f8: '', color8: '#AAAAAA',
		f9: '', color9: '#0000AA',
		xmin: '-10',
		xmax: '10',
		ymin: '-10',
		ymax: '10',
		update: function() { update() }
	};	

	var gui = new dat.GUI();
	
	var relations = gui.addFolder('Relations');
	
	var relation1 = relations.addFolder('1:');
	relation1.add(parameters, 'f1').name('Equation: ');
	relation1.addColor(parameters, 'color1').name('Color:');
	var relation2 = relations.addFolder('2:');
	relation2.add(parameters, 'f2').name('Equation: ');
	relation2.addColor(parameters, 'color2').name('Color:');
	var relation3 = relations.addFolder('3:');
	relation3.add(parameters, 'f3').name('Equation: ');
	relation3.addColor(parameters, 'color3').name('Color:');
	var relation4 = relations.addFolder('4:');
	relation4.add(parameters, 'f4').name('Equation: ');
	relation4.addColor(parameters, 'color4').name('Color:');
	var relation5 = relations.addFolder('5:');
	relation5.add(parameters, 'f5').name('Equation: ');
	relation5.addColor(parameters, 'color5').name('Color:');
	var relation6 = relations.addFolder('6:');
	relation6.add(parameters, 'f6').name('Equation: ');
	relation6.addColor(parameters, 'color6').name('Color:');
	var relation7 = relations.addFolder('7:');
	relation7.add(parameters, 'f7').name('Equation: ');
	relation7.addColor(parameters, 'color7').name('Color:');
	var relation8 = relations.addFolder('8:');
	relation8.add(parameters, 'f8').name('Equation: ');
	relation8.addColor(parameters, 'color8').name('Color:');
	var relation9 = relations.addFolder('9:');
	relation9.add(parameters, 'f9').name('Equation: ');
	relation9.addColor(parameters, 'color9').name('Color:');
	
	var windowSettings = gui.addFolder('Window Settings');
		
	windowSettings.add(parameters, 'xmin').name('x Min:');
	windowSettings.add(parameters, 'xmax').name('x Max:');
	windowSettings.add(parameters, 'ymin').name('y Min:');
	windowSettings.add(parameters, 'ymax').name('y Max:');
	
	gui.add(parameters, 'update').name('Update Graph');

}

function updateWindowBounds() {
	JSXSetBounds(board, [parseFloat(parameters.xmin), parseFloat(parameters.xmax), 
						 parseFloat(parameters.ymin), parseFloat(parameters.ymax)], 
				 false);
}

</script>
</body>
</html>